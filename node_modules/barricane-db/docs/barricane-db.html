<!DOCTYPE html>  <html> <head>   <title>barricane-db.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="example-create-database.html">                 example-create-database.js               </a>                                           <a class="source" href="example-model.html">                 example-model.js               </a>                                           <a class="source" href="example-read-database.html">                 example-read-database.js               </a>                                           <a class="source" href="barricane-db.html">                 barricane-db.js               </a>                                           <a class="source" href="db.html">                 db.js               </a>                                           <a class="source" href="disk-io.html">                 disk-io.js               </a>                                           <a class="source" href="swoj-codec.html">                 swoj-codec.js               </a>                                           <a class="source" href="util.html">                 util.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               barricane-db.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>Copyright (c) 2010 Barricane Technology Ltd., All Rights Reserved.
Released under the MIT open source licence.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h1>BarricaneDB - a transparent object persistence mechanism for NodeJS.</h1>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Status v0.2.0 - Just about works - there will be bugs.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>BarricaneDB is a persistence layer for <a href="http://nodejs.org/">NodeJS</a> which was developed to meet my following requirements:</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <ul>
<li>My app's state exists as a heap of objects in RAM.  I just want to be able to shutdown my app and get that same heap of objects the next time I start my app.</li>
<li>I don't want to have to add or change more than a dozen lines of code.</li>
<li>I want a proper transaction log, so that the data is resilient against application crashes.</li>
<li>I want to be able to read the transaction log - I care more about making my app easily debuggable than saving disk space.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>BarricaneDB is a loose implementation of the <a href="http://www.ibm.com/developerworks/library/wa-objprev/">Prevalence</a> System Design Pattern, as implemented in Java by <a href="http://www.prevayler.org/">Prevaylor</a>, but for <a href="http://nodejs.org/">NodeJS</a>.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <h2>Examples</h2>

<ul>
<li><a href="http://www.barricane.com/barricane-db/example-create-database.html">example-create-database</a> </li>
<li><a href="http://www.barricane.com/barricane-db/example-model.html">example-model</a> </li>
<li><a href="http://www.barricane.com/barricane-db/example-read-database.html">example-read-database</a> </li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>There's also docco-generated, documentation online at <a href="http://www.barricane.com/barricane-db/">http://www.barricane.com/barricane-db/</a>.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <h2>Installation</h2>

<ul>
<li><code>npm install barricane-db</code></li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <h2>Reasons why BarricaneDB will never be a good fit for your application.</h2>

<ul>
<li>Your data set is too big to fit in RAM.</li>
<li>Your application doesn't happily shard into BarricaneDB's one-DB-per-process design.</li>
<li>You need to query your database from outside the NodeJS process - e.g. Crystal Reports.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <h2>Reasons why BarricaneDB is not <em>currently</em> a good fit.</h2>

<ul>
<li>Your application needs a production-tested solution.</li>
<li>You need good error handling.</li>
<li>You need async database opening (persistence is already fully async).</li>
<li>Transactions are important to you.</li>
<li>Your application needs ACID guarantees.  BarricaneDB could loose 1-5 seconds of data on a process crash (OS dependent).</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <h2>Backwards compatibility.</h2>

<ul>
<li>We use codecs to separate the data representation from the database.</li>
<li>All future versions of BarricaneDB will be able to read v0.2.0 <code>.swoj</code> files.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <h2>Keep up with BarricaneDB.</h2>

<ul>
<li><a href="https://github.com/chrisdew/barricane-db/toggle_watch">Watch</a> this project on <a href="https://github.com/chrisdew/barricane-db">GitHub</a>.</li>
<li>Follow the <a href="https://groups.google.com/group/barricane-db">barricane-db</a> Google Group.</li>
<li>Look at the documentation on <a href="http://www.barricane.com/barricane-db">www.barricane.com</a>.</li>
<li>Send me an <a href="mailto:cmsdew@gmail.com">email</a>.</li>
<li>Follow <a href="http://twitter.com/chrisdew">chrisdew</a> on Twitter.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <h2>Roadmap</h2>

<ul>
<li>Whether I do anything more to this project, beyond functionality required for some of my other projects, really depends on there being some level of interest in the community.  If you want things to happen, please <a href="https://github.com/chrisdew/barricane-db/toggle_watch">watch</a> this project on <a href="https://github.com/chrisdew/barricane-db">GitHub</a> and subscribe to the <a href="https://groups.google.com/group/barricane-db">Google Group</a>.</li>
<li>Some of the features I'd like to add include:</li>
</ul>

<h1>Change the DB to an emitter and make the open async.</h1>

<h1>Create a subscribe facility so that webclient-proxy objects can be notified on changes to objects which are displayed on user's browsers.</h1>

<h1>Create a more efficient delta-codec which only logs the changed fields of registered instances.</h1>

<h1>Add ACID transactions.</h1>

<ul>
<li>Anything you'd like to add? - Create an issue on GitHub.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>This file is the entry point for the NPM barricane-db package. 
It only exports symbols required from other modules.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">bdb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./db&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">DB</span> <span class="o">=</span> <span class="nx">bdb</span><span class="p">.</span><span class="nx">DB</span><span class="p">;</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> <script type="text/javascript">    var _gaq = _gaq || [];   _gaq.push(['_setAccount', 'UA-732703-12']);   _gaq.push(['_trackPageview']);    (function() {     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);   })();  </script> </body> </html> 